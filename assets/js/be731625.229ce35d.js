"use strict";(self.webpackChunkfrappe=self.webpackChunkfrappe||[]).push([[973],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>m});var r=t(7294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=r.createContext({}),d=function(e){var a=r.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},c=function(e){var a=d(e.components);return r.createElement(s.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},u=r.forwardRef((function(e,a){var t=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=d(t),m=n,v=u["".concat(s,".").concat(m)]||u[m]||p[m]||i;return t?r.createElement(v,l(l({ref:a},c),{},{components:t})):r.createElement(v,l({ref:a},c))}));function m(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var i=t.length,l=new Array(i);l[0]=u;var o={};for(var s in a)hasOwnProperty.call(a,s)&&(o[s]=a[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,l[1]=o;for(var d=2;d<i;d++)l[d]=t[d];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},2952:(e,a,t)=>{t.r(a),t.d(a,{frontMatter:()=>o,contentTitle:()=>s,metadata:()=>d,toc:()=>c,default:()=>u});var r=t(7462),n=t(3366),i=(t(7294),t(3905)),l=["components"],o={},s="PPG05 - Gu\xeda de deployment Frapp\xe9",d={unversionedId:"guides/PPG05-guia-deployment",id:"guides/PPG05-guia-deployment",isDocsHomePage:!1,title:"PPG05 - Gu\xeda de deployment Frapp\xe9",description:"Objetivo(s)",source:"@site/docs/guides/PPG05-guia-deployment.md",sourceDirName:"guides",slug:"/guides/PPG05-guia-deployment",permalink:"/frappe/guides/PPG05-guia-deployment",editUrl:"https://github.com/Taro-IT/frappe/edit/main/apps/docs/docs/guides/PPG05-guia-deployment.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"PP-G03 - Gu\xeda para hacer el API Gateway de backend",permalink:"/frappe/guides/PPG04-guia-gateway"}},c=[{value:"Objetivo(s)",id:"objetivos",children:[],level:2},{value:"Pre-requisitos",id:"pre-requisitos",children:[],level:2},{value:"Pasos a seguir",id:"pasos-a-seguir",children:[{value:"Staging",id:"staging",children:[],level:3},{value:"Production",id:"production",children:[],level:3},{value:"Consideraciones",id:"consideraciones",children:[],level:3}],level:2},{value:"Salidas",id:"salidas",children:[],level:2},{value:"Autores",id:"autores",children:[],level:2},{value:"Auditor\xeda",id:"auditor\xeda",children:[],level:2},{value:"Bit\xe1cora de cambios",id:"bit\xe1cora-de-cambios",children:[{value:"Versi\xf3n 1.0",id:"versi\xf3n-10",children:[],level:3}],level:2}],p={toc:c};function u(e){var a=e.components,t=(0,n.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"ppg05---gu\xeda-de-deployment-frapp\xe9"},"PPG05 - Gu\xeda de deployment Frapp\xe9"),(0,i.kt)("h2",{id:"objetivos"},"Objetivo(s)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Generar una versi\xf3n consumible del sistema en un ambiente de producci\xf3n o staging")),(0,i.kt)("h2",{id:"pre-requisitos"},"Pre-requisitos"),(0,i.kt)("p",null,"Verificar que la l\xednea a desplegar este lista para ello"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Los test pasaron satisfactoriamente"),(0,i.kt)("li",{parentName:"ul"},"Puede realizarse un build de la l\xednea"),(0,i.kt)("li",{parentName:"ul"},"Cumple con la revisi\xf3n de calidad (Checklist de c\xf3digo, Lint y Statics Testing)")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Para ver si la l\xednea cumple con estos requisitos, el ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Taro-IT/frappe/actions/workflows/ci.yml"},"flujo de CI")," debe mostrar un check verde"))),(0,i.kt)("h2",{id:"pasos-a-seguir"},"Pasos a seguir"),(0,i.kt)("h3",{id:"staging"},"Staging"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Realizar el merge de una Feature branch a la rama dev")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Para monitorear el despliegue a ",(0,i.kt)("inlineCode",{parentName:"p"},"staging"),", se puede acceder al ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Taro-IT/frappe/actions/workflows/deploy-staging.yml"},"flujo de CD Dev")," y ver el estatus actual. Si todo se ejecut\xf3 correctamente, deber\xe1 mostrar un check verde."))),(0,i.kt)("h3",{id:"production"},"Production"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Realizar el merge de la rama dev a la main ")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Para monitorear el despliegue a ",(0,i.kt)("inlineCode",{parentName:"p"},"prod"),", se puede acceder al ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Taro-IT/frappe/actions/workflows/deploy-prod.yml"},"flujo de CD")," y ver el estatus actual. Si todo se ejecut\xf3 correctamente, deber\xe1 mostrar un check verde."))),(0,i.kt)("p",null,"Una vez que se aprueba el merge de la rama, se llama el Workflow de GitHub Actions el cual hace lo siguiente:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Se genera un release en github (label en base a los commits generados)"),(0,i.kt)("li",{parentName:"ul"},"Se selecciona el nombre del proyecto a desplegar  ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"prod")," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"API - Azure App Service - cinica-mx-node-express-api-prod"),(0,i.kt)("li",{parentName:"ul"},"Front - Vercel - cinica-backoffice | cinica-ecommerce"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"staging")," (pruebas-cinica-mx-node)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"API - Azure App Service - pruebas-cinica-mx-node"),(0,i.kt)("li",{parentName:"ul"},"Front - Vercel - frappe-backoffice | frappe-ecommerce"))))),(0,i.kt)("li",{parentName:"ul"},"Se inicia la creaci\xf3n y despliegue de los artefactos de release")),(0,i.kt)("p",null,"Una vez finalizada la acci\xf3n, ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Taro-IT/frappe/releases"},"en el area de releases")," aparecer\xe1 un release con los \xfaltimos commits\nrealizados desde el \xfaltimo release."),(0,i.kt)("h3",{id:"consideraciones"},"Consideraciones"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Existe un api gateway y dos front ends para cada etapa. "),(0,i.kt)("li",{parentName:"ul"},"Las etapas estan asociadas a las ramas de github. La etapa de staging esta asociada a la rama dev, mientras que la etapa de producci\xf3n esta asociada a la rama main,\npor tanto primero se hacen los merges a la rama dev, y ya despues eso se pasa a la rama main."),(0,i.kt)("li",{parentName:"ul"},"Aunque los merges son instantaneos, el procedimiento para generar una soluci\xf3n y subirla a los servicios correspondientes puede tardar alrededor de 10 minutos.")),(0,i.kt)("h2",{id:"salidas"},"Salidas"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Una soluci\xf3n consumible en el ambiente seleccionado (prod/staging)"),(0,i.kt)("li",{parentName:"ul"},"Un tag con un release. El release contiene una lista de commits realizados desde el \xfaltimo despliegue.")),(0,i.kt)("h2",{id:"autores"},"Autores"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Mauricio Alvarez "),(0,i.kt)("li",{parentName:"ul"},"Vladimir Salvador"),(0,i.kt)("li",{parentName:"ul"},"Eduardo Castillo")),(0,i.kt)("h2",{id:"auditor\xeda"},"Auditor\xeda"),(0,i.kt)("h2",{id:"bit\xe1cora-de-cambios"},"Bit\xe1cora de cambios"),(0,i.kt)("h3",{id:"versi\xf3n-10"},"Versi\xf3n 1.0"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Se cre\xf3 la gu\xeda")))}u.isMDXComponent=!0}}]);